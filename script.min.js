function setCurrentYear(){const yearElement=document.getElementById('currentYear');if(yearElement){yearElement.textContent=new Date().getFullYear();}}function scrollToContact(){const contactSection=document.getElementById('kontakt');if(contactSection){contactSection.scrollIntoView({behavior:'smooth',block:'start'});}}function initSmoothScrolling(){document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener('click',function(e){e.preventDefault();const target=document.querySelector(this.getAttribute('href'));if(target){target.scrollIntoView({behavior:'smooth',block:'start'});}});});}function initHeaderScrollEffect(){window.addEventListener('scroll',function(){const header=document.querySelector('.header');if(header){if(window.scrollY>100){header.style.background='rgba(0, 0, 0, 0.95)';}else{header.style.background='#000000';}}});}function setActiveNavigation(){const currentPage=window.location.pathname.split('/').pop()||'index.html';const navLinks=document.querySelectorAll('.nav a');navLinks.forEach(link=>{link.classList.remove('active');const linkHref=link.getAttribute('href');if(linkHref===currentPage||(currentPage===''&&linkHref==='index.html')||(currentPage==='index.html'&&linkHref==='index.html')){link.classList.add('active');}});}const THEME_KEY='stefan-spiess-theme';function initTheme(){const savedTheme=localStorage.getItem(THEME_KEY);const prefersDark=window.matchMedia('(prefers-color-scheme: dark)').matches;const theme=savedTheme||(prefersDark?'dark':'light');applyTheme(theme);updateToggleButton(theme);}function applyTheme(theme){if(theme==='dark'){document.documentElement.setAttribute('data-theme','dark');}else{document.documentElement.removeAttribute('data-theme');}localStorage.setItem(THEME_KEY,theme);}function updateToggleButton(theme){const toggleButton=document.getElementById('themeToggle');if(toggleButton){if(theme==='dark'){toggleButton.textContent='‚òÄÔ∏è';toggleButton.setAttribute('aria-label','Zur hellen Ansicht wechseln (Light Mode aktivieren)');toggleButton.setAttribute('title','Zur hellen Ansicht wechseln - Bessere Lesbarkeit bei Tag');}else{toggleButton.textContent='üåô';toggleButton.setAttribute('aria-label','Zur dunklen Ansicht wechseln (Dark Mode aktivieren)');toggleButton.setAttribute('title','Zur dunklen Ansicht wechseln - Schont die Augen bei Dunkelheit');}console.log('Toggle button updated to:',toggleButton.textContent,'for theme:',theme);}else{console.error('Toggle button not found when trying to update!');}}function toggleTheme(){try{const currentTheme=document.documentElement.hasAttribute('data-theme')?'dark':'light';const newTheme=currentTheme==='dark'?'light':'dark';console.log('Toggling theme from',currentTheme,'to',newTheme);applyTheme(newTheme);updateToggleButton(newTheme);console.log('Theme toggle completed successfully');}catch(error){console.error('Error during theme toggle:',error);}}function initThemeToggle(){const toggleButton=document.getElementById('themeToggle');if(toggleButton){toggleButton.removeEventListener('click',toggleTheme);toggleButton.addEventListener('click',function(e){e.preventDefault();toggleTheme();});toggleButton.addEventListener('keydown',function(e){if(e.key==='Enter'||e.key===' '){e.preventDefault();toggleTheme();}});console.log('Dark Mode toggle initialized successfully');}else{console.error('Dark Mode toggle button not found!');}}function initSystemThemeListener(){const mediaQuery=window.matchMedia('(prefers-color-scheme: dark)');mediaQuery.addEventListener('change',function(e){if(!localStorage.getItem(THEME_KEY)){const theme=e.matches?'dark':'light';applyTheme(theme);updateToggleButton(theme);}});}document.addEventListener('DOMContentLoaded',function(){try{console.log('Initializing Stefan Spie√ü website functions...');setCurrentYear();initSmoothScrolling();initHeaderScrollEffect();setActiveNavigation();initTheme();initThemeToggle();initSystemThemeListener();console.log('All functions initialized successfully');}catch(error){console.error('Error during initialization:',error);}});if(document.readyState==='loading'){}else{setTimeout(function(){try{console.log('Fallback initialization triggered');initTheme();initThemeToggle();}catch(error){console.error('Error during fallback initialization:',error);}},100);}
